window.CUSDIS={};const makeIframeContent=e=>{e.dataset.host;const n=e.dataset.iframe||"/asset/js/cusdis.umd.js";return`<!DOCTYPE html>\n<html>\n  <head>\n    <link rel="stylesheet" href="/asset/css/style.css">\n    <base target="_parent" />\n    <link>\n    <script>\n      window.CUSDIS_LOCALE = ${JSON.stringify(window.CUSDIS_LOCALE)}\n      window.__DATA__ = ${JSON.stringify(e.dataset)}\n    <\/script>\n    <style>\n      :root {\n        color-scheme: light;\n      }\n    </style>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script src="${n}" type="module">\n      \n    <\/script>\n  </body>\n</html>`};let singleTonIframe;function createIframe(e){return singleTonIframe||(singleTonIframe=document.createElement("iframe"),listenEvent(singleTonIframe,e)),singleTonIframe.srcdoc=makeIframeContent(e),singleTonIframe.style.width="100%",singleTonIframe.style.border="0",singleTonIframe}function postMessage(e,n){singleTonIframe&&singleTonIframe.contentWindow.postMessage(JSON.stringify({from:"cusdis",event:e,data:n}))}function listenEvent(e,n){const t=window.matchMedia("(prefers-color-scheme: dark)"),s=s=>{try{const i=JSON.parse(s.data);if("cusdis"===i.from)switch(i.event){case"onload":"auto"===n.dataset.theme&&postMessage("setTheme",t.matches?"dark":"light");break;case"resize":e.style.height=i.data+"px"}}catch(e){}};function i(e){const t=e.matches;"auto"===n.dataset.theme&&postMessage("setTheme",t?"dark":"light")}return window.addEventListener("message",s),t.addEventListener("change",i),()=>{t.removeEventListener("change",i),window.removeEventListener("message",s)}}function render(e){if(e){e.innerHTML="";const n=createIframe(e);e.appendChild(n)}}function initial(){let e;window.cusdisElementId?e=document.querySelector(`#${window.cusdisElementId}`):document.querySelector("#cusdis_thread")?e=document.querySelector("#cusdis_thread"):document.querySelector("#cusdis")&&(console.warn("id `cusdis` is deprecated. Please use `cusdis_thread` instead"),e=document.querySelector("#cusdis")),!0===window.CUSDIS_PREVENT_INITIAL_RENDER||e&&render(e)}window.renderCusdis=render,window.CUSDIS.renderTo=render,window.CUSDIS.setTheme=function(e){postMessage("setTheme",e)},window.CUSDIS.initial=initial,initial();